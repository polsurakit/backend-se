function makeCreditCardPayment(creditCardDetail, roomID) {
	if (roomID is not exist){
		Display Error "item is not exist"
	} else {
		requestingUser = Session.user
		reservationInfo = Studio.getReservationInfo(roomID, requestingUser)

		if (reservationInfo.status is not approved) {
			Display Error "item is not approved"
		} else {
			isCreditCardValid = CreditCardCenter.validateCard(
									creditCardDetail.id,
									creditCardDetail.name,
									creditCardDetail.expiredMonth,
									creditCardDetail.expiredYear,
									creditCardDetail.cvv)
			if (!isCreditCardValid) {
				Display Error "CreditCard is not valid"
			} else {
				price = roomID.price
				isSuccess = CreditCardCenter.pay(
										creditCardDetail.id,
										creditCardDetail.name,
										creditCardDetail.expiredMonth,
										creditCardDetail.expiredYear,
										creditCardDetail.cvv)
				if (isSuccess) {
					Send payment confirmation to buyer's email
				} else {
					Display Error "CreditCard cannot be charged"
				}
			}
		}
	}
}

function makeRoomReservation(roomID, requestTimeSlot, requestCap) {
	requestingUser = Session.user
	if (roomID, requestTimeSlot, requestCap valid) {
		room = Room.getRoom(roomID)
		if (room.capacity < requestCap) {
			Display Error "Room capacity is not enough"
		} else {
			isAvailable = room.checkTimeSlot(requestTimeSlot)
			if (isAvailable) {
				room.makeReservation(requestTimeSlot, requestingUser)
				Send a reservation notification to Studio Owner
				Display reservation detail
			} else {
				Display Error "Room is not available in this Time"
			}
		}
	} else {
		Display Error "input is not valid"
	}		
}

function approveReservation (roomID, reservation) {
	ownerUser = Session.user
	if (ownerUser != roomID.owner) {
		Display Error "Wrong owner"
	} else {
		reservation.approve()
	}
}

